(function(a){a(function(){var d,j,u,c;k.defer=f;k.reject=i;k.isPromise=q;k.all=e;k.some=o;k.any=p;k.map=x;k.reduce=n;k.chain=s;d=Object.freeze||function(y){return y};function g(){}g.prototype=d({always:function(y,z){return this.then(y,y,z)},otherwise:function(y){return this.then(c,y)}});function t(y){var z=new g();z.then=function(C){var A;try{if(C){A=C(y)}return r(A===c?y:A)}catch(B){return w(B)}};return d(z)}function w(z){var y=new g();y.then=function(D,A){var B;try{if(A){B=A(z);return r(B===c?z:B)}return w(z)}catch(C){return w(C)}};return d(y)}function i(y){return k(y,function(z){return w(z)})}function f(){var H,J,F,D,B,z,A;F=[];D=[];B=function E(N,L,M){var K=f();F.push(function(O){O.then(N,L).then(K.resolve,K.reject,K.progress)});M&&D.push(M);return K.promise};function C(M,K,L){return B(M,K,L)}function G(K){A(t(K))}function I(K){A(w(K))}z=function(M){var K,L=0;while(K=D[L++]){K(M)}};function y(K){z(K)}A=function(L){var N,K=0;B=L.then;A=z=function M(){throw new Error("already completed")};D=c;while(N=F[K++]){N(L)}F=[]};H={};J=new g();J.then=H.then=C;H.promise=d(J);H.resolver=d({resolve:(H.resolve=G),reject:(H.reject=I),progress:(H.progress=y)});return H}function q(y){return y&&typeof y.then==="function"}function k(A,C,B,z){var y=r(A);return y.then(C,B,z)}function r(y){var A,z;if(y instanceof g){A=y}else{z=f();if(q(y)){y.then(z.resolve,z.reject,z.progress);A=z.promise}else{z.resolve(y);A=z.promise}}return A}function o(B,A,C,z,y){m(2,arguments);return k(B,function(H){var M,J,L,P,F,G,O,K,I;K=H.length>>>0;M=Math.max(0,Math.min(A,K));J=[];P=f();L=k(P,C,z,y);function N(R){F(R)}function Q(R){G(R)}function D(R){O(R)}function E(){F=G=O=h}if(!M){P.resolve(J)}else{F=function(R){J.push(R);if(!--M){E();P.resolve(J)}};G=function(R){E();P.reject(R)};O=P.progress;for(I=0;I<K;++I){if(I in H){k(H[I],N,Q,D)}}}return L})}function e(A,B,z,y){m(1,arguments);return k(A,function(C){return v(C,l,[])}).then(B,z,y)}function l(z,A,y){z[y]=A;return z}function p(A,C,z,y){function B(D){return C?C(D[0]):D[0]}return o(A,1,B,z,y)}function x(z,y){return k(z,function(A){return b(A,y)})}function b(B,C){var A,y,z;y=B.length>>>0;A=new Array(y);for(z=0;z<y;z++){if(z in B){A[z]=k(B[z],C)}}return v(A,l,A)}function n(B,A,y){var z=u.call(arguments,1);return k(B,function(C){return v.apply(c,[C].concat(z))})}function v(C,A,y){var B,z;B=C.length;z=[function(E,F,D){return k(E,function(G){return k(F,function(H){return A(G,H,D,B)})})}];if(arguments.length>2){z.push(y)}return j.apply(C,z)}function s(y,B,A){var z=arguments.length>2;return k(y,function(C){if(z){C=A}B.resolve(C);return C},function(C){B.reject(C);return w(C)},B.progress)}function m(B,A){var y,z=A.length;while(z>B){y=A[--z];if(y!=null&&typeof y!="function"){throw new Error("callback is not a function")}}}function h(){}u=[].slice;j=[].reduce||function(D){var z,B,A,y,C;C=0;z=Object(this);y=z.length>>>0;B=arguments;if(B.length<=1){for(;;){if(C in z){A=z[C++];break}if(++C>=y){throw new TypeError()}}}else{A=B[1]}for(;C<y;++C){if(C in z){A=D(A,z[C],C,z)}}return A};return k})})(typeof define=="function"?define:function(a){typeof module!="undefined"?(module.exports=a()):(jQuery.mapster_when=a())});(function($){$.fn.mapster=function(method){var m=$.mapster.impl;if($.isFunction(m[method])){return m[method].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof method==="object"||!method){return m.bind.apply(this,arguments)}else{$.error("Method "+method+" does not exist on jQuery.mapster")}}};$.mapster={version:"1.2.11",render_defaults:{isSelectable:true,isDeselectable:true,fade:false,fadeDuration:150,fill:true,fillColor:"000000",fillColorMask:"FFFFFF",fillOpacity:0.7,highlight:true,stroke:false,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,includeKeys:"",altImage:null,altImageId:null,altImages:{}},defaults:{clickNavigate:false,wrapClass:null,wrapCss:null,onGetList:null,sortList:false,listenToList:false,mapKey:"",mapValue:"",singleSelect:false,listKey:"value",listSelectedAttribute:"selected",listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:30000,noHrefIsMask:true,scaleMap:true,safeLoad:false,areas:[]},shared_defaults:{render_highlight:{fade:true},render_select:{fade:false},staticState:null,selected:null},area_defaults:{includeKeys:"",isMask:false},canvas_style:{position:"absolute",left:0,top:0,padding:0,border:0},hasCanvas:null,isTouch:null,map_cache:[],hooks:{},addHook:function(name,callback){this.hooks[name]=(this.hooks[name]||[]).push(callback)},callHooks:function(name,context){$.each(this.hooks[name]||[],function(i,e){e.apply(context)})},utils:{when:$.mapster_when,defer:$.mapster_when.defer,subclass:function(BaseClass,constr){var Subclass=function(){var me=this,args=Array.prototype.slice.call(arguments,0);me.base=BaseClass.prototype;me.base.init=function(){BaseClass.prototype.constructor.apply(me,args)};constr.apply(me,args)};Subclass.prototype=new BaseClass();Subclass.prototype.constructor=Subclass;return Subclass},asArray:function(obj){return obj.constructor===Array?obj:this.split(obj)},split:function(text,cb){var i,el,arr=text.split(",");for(i=0;i<arr.length;i++){el=$.trim(arr[i]);if(el===""){arr.splice(i,1)}else{arr[i]=cb?cb(el):el}}return arr},updateProps:function(_target,_template){var onlyProps,target=_target||{},template=$.isEmptyObject(target)?_template:_target;onlyProps=[];$.each(template,function(prop){onlyProps.push(prop)});$.each(Array.prototype.slice.call(arguments,1),function(i,src){$.each(src||{},function(prop){if(!onlyProps||$.inArray(prop,onlyProps)>=0){var p=src[prop];if($.isPlainObject(p)){target[prop]=$.extend(target[prop]||{},p)}else{if(p&&p.constructor===Array){target[prop]=p.slice(0)}else{if(typeof p!=="undefined"){target[prop]=src[prop]}}}}})});return target},isElement:function(o){return(typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o.nodeType===1&&typeof o.nodeName==="string")},indexOfProp:function(obj,prop,val){var result=obj.constructor===Array?-1:null;$.each(obj,function(i,e){if(e&&(prop?e[prop]:e)===val){result=i;return false}});return result},boolOrDefault:function(obj,def){return this.isBool(obj)?obj:def||false},isBool:function(obj){return typeof obj==="boolean"},isUndef:function(obj){return typeof obj==="undefined"},ifFunction:function(obj,that,args){if($.isFunction(obj)){obj.call(that,args)}},size:function(image,raw){var u=$.mapster.utils;return{width:raw?(image.width||image.naturalWidth):u.imgWidth(image,true),height:raw?(image.height||image.naturalHeight):u.imgHeight(image,true),complete:function(){return !!this.height&&!!this.width}}},setOpacity:function(el,opacity){if($.mapster.hasCanvas()){el.style.opacity=opacity}else{$(el).each(function(i,e){if(typeof e.opacity!=="undefined"){e.opacity=opacity}else{$(e).css("opacity",opacity)}})}},fader:(function(){var elements={},lastKey=0,fade_func=function(el,op,endOp,duration){var index,cbIntervals=duration/15,obj,u=$.mapster.utils;if(typeof el==="number"){obj=elements[el];if(!obj){return}}else{index=u.indexOfProp(elements,null,el);if(index){delete elements[index]}elements[++lastKey]=obj=el;el=lastKey}endOp=endOp||1;op=(op+(endOp/cbIntervals)>endOp-0.01)?endOp:op+(endOp/cbIntervals);u.setOpacity(obj,op);if(op<endOp){setTimeout(function(){fade_func(el,op,endOp,duration)},15)}};return fade_func}())},getBoundList:function(opts,key_list){if(!opts.boundList){return null}var index,key,result=$(),list=$.mapster.utils.split(key_list);opts.boundList.each(function(i,e){for(index=0;index<list.length;index++){key=list[index];if($(e).is("["+opts.listKey+'="'+key+'"]')){result=result.add(e)}}});return result},setBoundListProperties:function(opts,target,selected){target.each(function(i,e){if(opts.listSelectedClass){if(selected){$(e).addClass(opts.listSelectedClass)}else{$(e).removeClass(opts.listSelectedClass)}}if(opts.listSelectedAttribute){$(e).attr(opts.listSelectedAttribute,selected)}})},getMapDataIndex:function(obj){var img,id;switch(obj.tagName&&obj.tagName.toLowerCase()){case"area":id=$(obj).parent().attr("name");img=$("img[usemap='#"+id+"']")[0];break;case"img":img=obj;break}return img?this.utils.indexOfProp(this.map_cache,"image",img):-1},getMapData:function(obj){var index=this.getMapDataIndex(obj.length?obj[0]:obj);if(index>=0){return index>=0?this.map_cache[index]:null}},queueCommand:function(map_data,that,command,args){if(!map_data){return false}if(!map_data.complete||map_data.currentAction){map_data.commands.push({that:that,command:command,args:args});return true}return false},unload:function(){this.impl.unload();this.utils=null;this.impl=null;$.fn.mapster=null;$.mapster=null;$("*").unbind()}};var m=$.mapster,u=m.utils,ap=Array.prototype;$.each(["width","height"],function(i,e){var capProp=e.substr(0,1).toUpperCase()+e.substr(1);u["img"+capProp]=function(img,jqwidth){return(jqwidth?$(img)[e]():0)||img[e]||img["natural"+capProp]||img["client"+capProp]||img["offset"+capProp]}});m.Method=function(that,func_map,func_area,opts){var me=this;me.name=opts.name;me.output=that;me.input=that;me.first=opts.first||false;me.args=opts.args?ap.slice.call(opts.args,0):[];me.key=opts.key;me.func_map=func_map;me.func_area=func_area;me.name=opts.name;me.allowAsync=opts.allowAsync||false};m.Method.prototype={constructor:m.Method,go:function(){var i,data,ar,len,result,src=this.input,area_list=[],me=this;len=src.length;for(i=0;i<len;i++){data=$.mapster.getMapData(src[i]);if(data){if(!me.allowAsync&&m.queueCommand(data,me.input,me.name,me.args)){if(this.first){result=""}continue}ar=data.getData(src[i].nodeName==="AREA"?src[i]:this.key);if(ar){if($.inArray(ar,area_list)<0){area_list.push(ar)}}else{result=this.func_map.apply(data,me.args)}if(this.first||typeof result!=="undefined"){break}}}$(area_list).each(function(i,e){result=me.func_area.apply(e,me.args)});if(typeof result!=="undefined"){return result}else{return this.output}}};$.mapster.impl=(function(){var me={},addMap=function(map_data){return m.map_cache.push(map_data)-1},removeMap=function(map_data){m.map_cache.splice(map_data.index,1);for(var i=m.map_cache.length-1;i>=this.index;i--){m.map_cache[i].index--}};function hasVml(){var a=$("<div />").appendTo("body");a.html('<v:shape id="vml_flag1" adj="1" />');var b=a[0].firstChild;b.style.behavior="url(#default#VML)";var has=b?typeof b.adj==="object":true;a.remove();return has}function namespaces(){return typeof(document.namespaces)==="object"?document.namespaces:null}function hasCanvas(){var d=namespaces();return d&&d.g_vml_?false:$("<canvas />")[0].getContext?true:false}function merge_areas(map_data,areas){var ar,index,map_areas=map_data.options.areas;if(areas){$.each(areas,function(i,e){if(!e||!e.key){return}index=u.indexOfProp(map_areas,"key",e.key);if(index>=0){$.extend(map_areas[index],e)}else{map_areas.push(e)}ar=map_data.getDataForKey(e.key);if(ar){$.extend(ar.options,e)}})}}function merge_options(map_data,options){var temp_opts=u.updateProps({},options);delete temp_opts.areas;u.updateProps(map_data.options,temp_opts);merge_areas(map_data,options.areas);u.updateProps(map_data.area_options,map_data.options)}me.get=function(key){var md=m.getMapData(this);if(!(md&&md.complete)){throw ("Can't access data until binding complete.")}return(new m.Method(this,function(){return this.getSelected()},function(){return this.isSelected()},{name:"get",args:arguments,key:key,first:true,allowAsync:true,defaultReturn:""})).go()};me.data=function(key){return(new m.Method(this,null,function(){return this},{name:"data",args:arguments,key:key})).go()};me.highlight=function(key){return(new m.Method(this,function(){if(key===false){this.ensureNoHighlight()}else{var id=this.highlightId;return id>=0?this.data[id].key:null}},function(){this.highlight()},{name:"highlight",args:arguments,key:key,first:true})).go()};me.keys=function(key,all){var keyList=[],md=m.getMapData(this);if(!(md&&md.complete)){throw ("Can't access data until binding complete.")}function addUniqueKeys(ad){var areas,keys=[];if(!all){keys.push(ad.key)}else{areas=ad.areas();$.each(areas,function(i,e){keys=keys.concat(e.keys)})}$.each(keys,function(i,e){if($.inArray(e,keyList)<0){keyList.push(e)}})}if(!(md&&md.complete)){return""}if(typeof key==="string"){if(all){addUniqueKeys(md.getDataForKey(key))}else{keyList=[md.getKeysForGroup(key)]}}else{all=key;this.each(function(i,e){if(e.nodeName==="AREA"){addUniqueKeys(md.getDataForArea(e))}})}return keyList.join(",")};me.select=function(){me.set.call(this,true)};me.deselect=function(){me.set.call(this,false)};me.set=function(selected,key,options){var lastMap,map_data,opts=options,key_list,area_list;function setSelection(ar){if(ar){switch(selected){case true:ar.select(opts);break;case false:ar.deselect(true);break;default:selected=ar.toggle(opts);break}}}function addArea(ar){if(ar&&$.inArray(ar,area_list)<0){area_list.push(ar);key_list+=(key_list===""?"":",")+ar.key}}function finishSetForMap(map_data){$.each(area_list,function(i,el){setSelection(el)});if(!selected){map_data.removeSelectionFinish()}if(map_data.options.boundList){m.setBoundListProperties(map_data.options,m.getBoundList(map_data.options,key_list),selected)}}this.filter("img,area").each(function(i,e){var keys;map_data=m.getMapData(e);if(map_data!==lastMap){if(lastMap){finishSetForMap(lastMap)}area_list=[];key_list=""}if(map_data){keys="";if(e.nodeName.toUpperCase()==="IMG"){if(!m.queueCommand(map_data,$(e),"set",[selected,key,opts])){if(key instanceof Array){if(key.length){keys=key.join(",")}}else{keys=key}if(keys){$.each(u.split(keys),function(i,key){addArea(map_data.getDataForKey(key.toString()));lastMap=map_data})}}}else{opts=key;if(!m.queueCommand(map_data,$(e),"set",[selected,opts])){addArea(map_data.getDataForArea(e));lastMap=map_data}}}});if(map_data){finishSetForMap(map_data)}return this};me.unbind=function(preserveState){return(new m.Method(this,function(){this.clearEvents();this.clearMapData(preserveState);removeMap(this)},null,{name:"unbind",args:arguments})).go()};me.rebind=function(options){return(new m.Method(this,function(){var me=this;me.complete=false;me.configureOptions(options);me.bindImages().then(function(){me.buildDataset(true);me.complete=true})},null,{name:"rebind",args:arguments})).go()};me.get_options=function(key,effective){var eff=u.isBool(key)?key:effective;return(new m.Method(this,function(){var opts=$.extend({},this.options);if(eff){opts.render_select=u.updateProps({},m.render_defaults,opts,opts.render_select);opts.render_highlight=u.updateProps({},m.render_defaults,opts,opts.render_highlight)}return opts},function(){return eff?this.effectiveOptions():this.options},{name:"get_options",args:arguments,first:true,allowAsync:true,key:key})).go()};me.set_options=function(options){return(new m.Method(this,function(){merge_options(this,options)},null,{name:"set_options",args:arguments})).go()};me.unload=function(){var i;for(i=m.map_cache.length-1;i>=0;i--){if(m.map_cache[i]){me.unbind.call($(m.map_cache[i].image))}}me.graphics=null};me.snapshot=function(){return(new m.Method(this,function(){$.each(this.data,function(i,e){e.selected=false});this.base_canvas=this.graphics.createVisibleCanvas(this);$(this.image).before(this.base_canvas)},null,{name:"snapshot"})).go()};me.state=function(){var md,result=null;$(this).each(function(i,e){if(e.nodeName==="IMG"){md=m.getMapData(e);if(md){result=md.state()}return false}});return result};me.bind=function(options){return this.each(function(i,e){var img,map,usemap,md;img=$(e);md=m.getMapData(e);if(md){me.unbind.apply(img);if(!md.complete){img.bind();return true}md=null}usemap=this.getAttribute("usemap");map=usemap&&$('map[name="'+usemap.substr(1)+'"]');if(!(img.is("img")&&usemap&&map.size()>0)){return true}img.css("border",0);if(!md){md=new m.MapData(this,options);md.index=addMap(md);md.map=map;md.bindImages().then(function(){md.initialize()})}})};me.init=function(useCanvas){var style,shapes;m.hasCanvas=function(){if(!u.isBool(m.hasCanvas.value)){m.hasCanvas.value=u.isBool(useCanvas)?useCanvas:hasCanvas()}return m.hasCanvas.value};m.hasVml=function(){if(!u.isBool(m.hasVml.value)){var d=namespaces();if(d&&!d.v){d.add("v","urn:schemas-microsoft-com:vml");style=document.createStyleSheet();shapes=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"];$.each(shapes,function(i,el){style.addRule("v\\:"+el,"behavior: url(#default#VML); antialias:true")})}m.hasVml.value=hasVml()}return m.hasVml.value};m.isTouch=!!document.documentElement.ontouchstart;$.extend(m.defaults,m.render_defaults,m.shared_defaults);$.extend(m.area_defaults,m.render_defaults,m.shared_defaults)};me.test=function(obj){return eval(obj)};return me}());$.mapster.impl.init()}(jQuery));(function(e){var a,d=e.mapster,i=d.utils,g,b;function h(l,n,m){var o=l,p=o.map_data,k=m.isMask;e.each(n.areas(),function(q,r){m.isMask=k||(r.nohref&&p.options.noHrefIsMask);o.addShape(r,m)});m.isMask=k}function c(k){return Math.max(0,Math.min(parseInt(k,16),255))}function f(k,l){return"rgba("+c(k.substr(0,2))+","+c(k.substr(2,2))+","+c(k.substr(4,2))+","+l+")"}d.Graphics=function(l){var k=this;k.active=false;k.canvas=null;k.width=0;k.height=0;k.shapes=[];k.masks=[];k.map_data=l};a=d.Graphics.prototype={constructor:d.Graphics,begin:function(l,k){var m=e(l);this.elementName=k;this.canvas=l;this.width=m.width();this.height=m.height();this.shapes=[];this.masks=[];this.active=true},addShape:function(m,l){var k=l.isMask?this.masks:this.shapes;k.push({mapArea:m,options:l})},createVisibleCanvas:function(k){return e(this.createCanvasFor(k)).addClass("mapster_el").css(d.canvas_style)[0]},addShapeGroup:function(r,n,s){var q=this,o,l,m,p=this.map_data,k=r.effectiveRenderOptions(n);if(s){e.extend(k,s)}if(n==="select"){l="static_"+r.areaId.toString();m=p.base_canvas}else{m=p.overlay_canvas}q.begin(m,l);if(k.includeKeys){o=i.split(k.includeKeys);e.each(o,function(u,v){var t=p.getDataForKey(v.toString());h(q,t,t.effectiveRenderOptions(n))})}h(q,r,k);q.render();if(k.fade){i.fader(d.hasCanvas()?m:e(m).find("._fill").not(".mapster_mask"),0,d.hasCanvas()?1:k.fillOpacity,k.fadeDuration)}}};function j(){}g={renderShape:function(l,m,n){var k,o=m.coords(null,n);switch(m.shape){case"rect":l.rect(o[0],o[1],o[2]-o[0],o[3]-o[1]);break;case"poly":l.moveTo(o[0],o[1]);for(k=2;k<m.length;k+=2){l.lineTo(o[k],o[k+1])}l.lineTo(o[0],o[1]);break;case"circ":case"circle":l.arc(o[0],o[1],o[2],0,Math.PI*2,false);break}},addAltImage:function(l,n,m,k){l.beginPath();this.renderShape(l,m);l.closePath();l.clip();l.globalAlpha=k.altImageOpacity||k.fillOpacity;l.drawImage(n,0,0,m.owner.scaleInfo.width,m.owner.scaleInfo.height)},render:function(){var p,n,m=this,o=m.map_data,r=m.masks.length,q=m.createCanvasFor(o),l=q.getContext("2d"),k=m.canvas.getContext("2d");if(r){p=m.createCanvasFor(o);n=p.getContext("2d");n.clearRect(0,0,p.width,p.height);e.each(m.masks,function(s,t){n.save();n.beginPath();m.renderShape(n,t.mapArea);n.closePath();n.clip();n.lineWidth=0;n.fillStyle="#000";n.fill();n.restore()})}e.each(m.shapes,function(t,u){l.save();if(u.options.fill){if(u.options.altImageId){m.addAltImage(l,o.images[u.options.altImageId],u.mapArea,u.options)}else{l.beginPath();m.renderShape(l,u.mapArea);l.closePath();l.fillStyle=f(u.options.fillColor,u.options.fillOpacity);l.fill()}}l.restore()});e.each(m.shapes.concat(m.masks),function(t,u){var v=u.options.strokeWidth===1?0.5:0;if(u.options.stroke){l.save();l.strokeStyle=f(u.options.strokeColor,u.options.strokeOpacity);l.lineWidth=u.options.strokeWidth;l.beginPath();m.renderShape(l,u.mapArea,v);l.closePath();l.stroke();l.restore()}});if(r){n.globalCompositeOperation="source-out";n.drawImage(q,0,0);k.drawImage(p,0,0)}else{k.drawImage(q,0,0)}m.active=false;return m.canvas},createCanvasFor:function(k){return e('<canvas width="'+k.scaleInfo.width+'" height="'+k.scaleInfo.height+'"></canvas>')[0]},clearHighlight:function(){var k=this.map_data.overlay_canvas;k.getContext("2d").clearRect(0,0,k.width,k.height)},refreshSelections:function(){var k,l=this.map_data;k=l.base_canvas;l.base_canvas=this.createVisibleCanvas(l);e(l.base_canvas).hide();e(k).before(l.base_canvas);l.redrawSelections();e(l.base_canvas).show();e(k).remove()}};b={renderShape:function(n,v,k){var p=this,t,u,m,l,r,q,s,o=n.coords();r=p.elementName?'name="'+p.elementName+'" ':"";q=k?'class="'+k+'" ':"";l='<v:fill color="#'+v.fillColor+'" class="_fill" opacity="'+(v.fill?v.fillOpacity:0)+'" /><v:stroke class="_fill" opacity="'+v.strokeOpacity+'"/>';u=v.stroke?" strokeweight="+v.strokeWidth+' stroked="t" strokecolor="#'+v.strokeColor+'"':' stroked="f"';t=v.fill?' filled="t"':' filled="f"';switch(n.shape){case"rect":s="<v:rect "+q+r+t+u+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+o[0]+"px;top:"+o[1]+"px;width:"+(o[2]-o[0])+"px;height:"+(o[3]-o[1])+'px;">'+l+"</v:rect>";break;case"poly":s="<v:shape "+q+r+t+u+' coordorigin="0,0" coordsize="'+p.width+","+p.height+'" path="m '+o[0]+","+o[1]+" l "+o.slice(2).join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+p.width+"px;height:"+p.height+'px;">'+l+"</v:shape>";break;case"circ":case"circle":s="<v:oval "+q+r+t+u+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(o[0]-o[2])+"px;top:"+(o[1]-o[2])+"px;width:"+(o[2]*2)+"px;height:"+(o[2]*2)+'px;">'+l+"</v:oval>";break}m=e(s);e(p.canvas).append(m);return m},render:function(){var l,k=this;e.each(this.shapes,function(m,n){k.renderShape(n.mapArea,n.options)});if(this.masks.length){e.each(this.masks,function(m,n){l=i.updateProps({},n.options,{fillOpacity:1,fillColor:n.options.fillColorMask});k.renderShape(n.mapArea,l,"mapster_mask")})}this.active=false;return this.canvas},createCanvasFor:function(m){var k=m.scaleInfo.width,l=m.scaleInfo.height;return e('<var width="'+k+'" height="'+l+'" style="zoom:1;overflow:hidden;display:block;width:'+k+"px;height:"+l+'px;"></var>')[0]},clearHighlight:function(){e(this.map_data.overlay_canvas).children().remove()},removeSelections:function(k){if(k>=0){e(this.map_data.base_canvas).find('[name="static_'+k.toString()+'"]').remove()}else{e(this.map_data.base_canvas).children().remove()}}};e.each(["renderShape","addAltImage","render","createCanvasFor","clearHighlight","removeSelections","refreshSelections"],function(k,l){a[l]=(function(m){return function(){a[m]=(d.hasCanvas()?g[m]:b[m])||j;return a[m].apply(this,arguments)}}(l))})}(jQuery));(function(d){var a=d.mapster,b=a.utils,c=[];a.MapImages=function(e){this.owner=e;this.clear()};a.MapImages.prototype={constructor:a.MapImages,slice:function(){return c.slice.apply(this,arguments)},splice:function(){c.slice.apply(this.status,arguments);var e=c.slice.apply(this,arguments);return e},complete:function(){return d.inArray(false,this.status)<0},_add:function(f){var e=c.push.call(this,f)-1;this.status[e]=false;return e},indexOf:function(e){return d.inArray(e,this)},clear:function(){var e=this;if(e.ids&&e.ids.length>0){d.each(e.ids,function(f,g){delete e[g]})}e.ids=[];e.length=0;e.status=[];e.splice(0)},add:function(g,i){var e,h,f=this;if(!g){return}if(typeof g==="string"){h=g;g=f[h];if(typeof g==="object"){return f.indexOf(g)}g=d("<img />").addClass("mapster_el").hide();e=f._add(g[0]);g.bind("load",function(j){f.imageLoaded.call(f,j)}).bind("error",function(j){f.imageLoadError.call(f,j)});g.attr("src",h)}else{e=f._add(d(g)[0])}if(i){if(this[i]){throw (i+" is already used or is not available as an altImage alias.")}f.ids.push(i);f[i]=f[e]}return e},bind:function(g){var h=this,i,e=h.owner.options.configTimeout/200,f=function(){var j;j=h.length;while(j-->0){if(!h.isLoaded(j)){break}}if(h.complete()){h.resolve()}else{if(e-->0){h.imgTimeout=window.setTimeout(function(){f.call(h,true)},50)}else{h.imageLoadError.call(h)}}};i=h.deferred=b.defer();f();return i},resolve:function(){var e=this,f=e.deferred;if(f){e.deferred=null;f.resolve()}},imageLoaded:function(h){var g=this,f=g.indexOf(h.target);if(f>=0){g.status[f]=true;if(d.inArray(false,g.status)<0){g.resolve()}}},imageLoadError:function(g){clearTimeout(this.imgTimeout);this.triesLeft=0;var f=g?"The image "+g.target.src+" failed to load.":"The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load.";throw f},isLoaded:function(g){var f,h=this,e=h.status;if(e[g]){return true}f=h[g];if(typeof f.complete!=="undefined"){e[g]=f.complete}else{e[g]=!!b.imgWidth(f)}return e[g]}}}(jQuery));(function(h){var d=h.mapster,k=d.utils;function a(m){h.extend(m,{complete:false,map:null,base_canvas:null,overlay_canvas:null,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null})}function e(m){return[m,m.render_highlight,m.render_select]}function g(o){var n=o.options,m=o.images;if(d.hasCanvas()){h.each(n.altImages||{},function(p,q){m.add(q,p)});h.each([n].concat(n.areas),function(p,q){h.each(e(q),function(r,s){if(s&&s.altImage){s.altImageId=m.add(s.altImage)}})})}o.area_options=k.updateProps({},d.area_defaults,n)}function f(q,o,p,n){n=n||k.when.defer();function m(r){if(q.currentAreaId!==r&&q.highlightId>=0){n.resolve()}}if(q.activeAreaEvent){window.clearTimeout(q.activeAreaEvent);q.activeAreaEvent=0}if(o<0){return}if(p.owner.currentAction||o){q.activeAreaEvent=window.setTimeout((function(){return function(){f(q,0,p,n)}}(p)),o||100)}else{m(p.areaId)}return n}function c(m){if(!d.hasCanvas()){this.blur()}m.preventDefault()}function j(n,o){var p=n.getAllDataForArea(this),m=p.length?p[0]:null;if(!m||m.isNotRendered()||m.owner.currentAction){return}if(n.currentAreaId===m.areaId){return}if(n.highlightId!==m.areaId){n.clearEffects();m.highlight();if(n.options.showToolTip){h.each(p,function(q,r){if(r.effectiveOptions().toolTip){r.showToolTip()}})}}n.currentAreaId=m.areaId;if(h.isFunction(n.options.onMouseover)){n.options.onMouseover.call(this,{e:o,options:m.effectiveOptions(),key:m.key,selected:m.isSelected()})}}function i(p,q){var n,m=p.getDataForArea(this),o=p.options;if(p.currentAreaId<0||!m){return}n=p.getDataForArea(q.relatedTarget);if(n===m){return}p.currentAreaId=-1;m.area=null;f(p,o.mouseoutDelay,m).then(p.clearEffects);if(h.isFunction(o.onMouseout)){o.onMouseout.call(this,{e:q,options:o,key:m.key,selected:m.isSelected()})}}function b(n){var m=n.options;n.ensureNoHighlight();if(m.toolTipClose&&h.inArray("area-mouseout",m.toolTipClose)>=0&&n.activeToolTip){n.clearToolTip()}}function l(w,u){var r,v,o,q,x,s,t=this,p=w.getDataForArea(this),n=w.options;function m(z){var y,A;x=(z.isSelectable()&&(z.isDeselectable()||!z.isSelected()));if(x){q=!z.isSelected()}else{q=z.isSelected()}o=d.getBoundList(n,z.key);if(h.isFunction(n.onClick)){s=n.onClick.call(t,{e:u,listTarget:o,key:z.key,selected:q});if(k.isBool(s)){if(!s){return false}A=h(z.area).attr("href");if(A!=="#"){window.location.href=A;return false}}}if(x){r=z.toggle()}if(n.boundList&&n.boundList.length>0){d.setBoundListProperties(n,o,z.isSelected())}y=z.effectiveOptions();if(y.includeKeys){v=k.split(y.includeKeys);h.each(v,function(C,D){var B=w.getDataForKey(D.toString());if(!B.options.isMask){m(B)}})}}c.call(this,u);if(n.clickNavigate&&p.href){window.location.href=p.href;return}if(p&&!p.owner.currentAction){n=w.options;m(p)}}d.MapData=function(o,m){var n=this;n.image=o;n.images=new d.MapImages(n);n.graphics=new d.Graphics(n);n.imgCssText=o.style.cssText||null;a(n);n.configureOptions(m);n.mouseover=function(p){j.call(this,n,p)};n.mouseout=function(p){i.call(this,n,p)};n.click=function(p){l.call(this,n,p)};n.clearEffects=function(p){b.call(this,n,p)}};d.MapData.prototype={constructor:d.MapData,configureOptions:function(m){this.options=k.updateProps({},d.defaults,m)},bindImages:function(){var n=this,m=n.images;if(m.length>2){m.splice(2)}else{if(m.length===0){m.add(n.image);m.add(n.image.src)}}g(n);return n.images.bind()},isActive:function(){return !this.complete||this.currentAction},state:function(){return{complete:this.complete,resizing:this.currentAction==="resizing",zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo}},wrapId:function(){return"mapster_wrap_"+this.index},_idFromKey:function(m){return typeof m==="string"&&this._xref.hasOwnProperty(m)?this._xref[m]:-1},getSelected:function(){var m="";h.each(this.data,function(n,o){if(o.isSelected()){m+=(m?",":"")+this.key}});return m},getAllDataForArea:function(s,r){var p,n,m,q=this,o=h(s).filter("area").attr(q.options.mapKey);if(o){m=[];o=k.split(o);for(p=0;p<(r||o.length);p++){n=q.data[q._idFromKey(o[p])];n.area=s.length?s[0]:s;m.push(n)}}return m},getDataForArea:function(n){var m=this.getAllDataForArea(n,1);return m?m[0]||null:null},getDataForKey:function(m){return this.data[this._idFromKey(m)]},getKeysForGroup:function(n){var m=this.getDataForKey(n);return !m?"":m.isPrimary?m.key:this.getPrimaryKeysForMapAreas(m.areas()).join(",")},getPrimaryKeysForMapAreas:function(m){var n=[];h.each(m,function(o,p){if(h.inArray(p.keys[0],n)<0){n.push(p.keys[0])}});return n},getData:function(m){if(typeof m==="string"){return this.getDataForKey(m)}else{if(m&&m.mapster||k.isElement(m)){return this.getDataForArea(m)}else{return null}}},ensureNoHighlight:function(){var m;if(this.highlightId>=0){this.graphics.clearHighlight();m=this.data[this.highlightId];m.changeState("highlight",false);this.setHighlightId(-1)}},setHighlightId:function(m){this.highlightId=m},clearSelections:function(){h.each(this.data,function(m,n){if(n.selected){n.deselect(true)}});this.removeSelectionFinish()},setAreaOptions:function(n){var p,o,m;n=n||[];for(p=n.length-1;p>=0;p--){o=n[p];if(o){m=this.getDataForKey(o.key);if(m){k.updateProps(m.options,o);if(k.isBool(o.selected)){m.selected=o.selected}}}}},drawSelections:function(o){var m,n=k.asArray(o);for(m=n.length-1;m>=0;m--){this.data[n[m]].drawSelection()}},redrawSelections:function(){h.each(this.data,function(m,n){if(n.isSelectedOrStatic()){n.drawSelection()}})},initialize:function(){var y,r,n,p,u,v,t,z,s,o,x,q,w=this,m=w.options;if(w.complete){return}s=h(w.image);u=s.parent().attr("id");if(u&&u.length>=12&&u.substring(0,12)==="mapster_wrap"){p=s.parent();p.attr("id",w.wrapId())}else{p=h('<div id="'+w.wrapId()+'"></div>');if(m.wrapClass){if(m.wrapClass===true){p.addClass(s[0].className)}else{p.addClass(m.wrapClass)}}}w.wrapper=p;w.scaleInfo=q=k.scaleMap(w.images[0],w.images[1],m.scaleMap);w.base_canvas=r=w.graphics.createVisibleCanvas(w);w.overlay_canvas=n=w.graphics.createVisibleCanvas(w);y=h(w.images[1]).addClass("mapster_el "+w.images[0].className).attr({id:null,usemap:null});z=k.size(w.images[0]);if(z.complete){y.css({width:z.width,height:z.height})}w.buildDataset();v={display:"block",position:"relative",padding:0,width:q.width,height:q.height};if(m.wrapCss){h.extend(v,m.wrapCss)}if(s.parent()[0]!==w.wrapper[0]){s.before(w.wrapper)}p.css(v);h(w.images.slice(2)).hide();for(t=1;t<w.images.length;t++){p.append(w.images[t])}p.append(r).append(n).append(s.css(d.canvas_style));k.setOpacity(w.images[0],0);h(w.images[1]).show();k.setOpacity(w.images[1],1);if(m.isSelectable&&m.onGetList){x=w.data.slice(0);if(m.sortList){if(m.sortList==="desc"){o=function(B,A){return B===A?0:(B>A?-1:1)}}else{o=function(B,A){return B===A?0:(B<A?-1:1)}}x.sort(function(B,A){B=B.value;A=A.value;return o(B,A)})}w.options.boundList=m.onGetList.call(w.image,x)}w.complete=true;w.processCommandQueue();if(m.onConfigured&&typeof m.onConfigured==="function"){m.onConfigured.call(s,true)}},buildDataset:function(o){var y,n,z,x,m,C,u,r,E,t,w,p,q,B,D=this,s=D.options,v;function A(G,H){var F=new d.AreaData(D,G,H);F.areaId=D._xref[G]=D.data.push(F)-1;return F.areaId}D._xref={};D.data=[];if(!o){D.mapAreas=[]}v=!s.mapKey;if(v){s.mapKey="data-mapster-key"}y=d.hasVml()?"area":(v?"area[coords]":"area["+s.mapKey+"]");n=h(D.map).find(y).unbind(".mapster");for(w=0;w<n.length;w++){x=0;C=n[w];m=h(C);if(!C.coords){continue}if(v){u=String(w);m.attr("data-mapster-key",u)}else{u=C.getAttribute(s.mapKey)}if(o){r=D.mapAreas[m.data("mapster")-1];r.configure(u)}else{r=new d.MapArea(D,C,u);D.mapAreas.push(r)}t=r.keys;for(z=t.length-1;z>=0;z--){E=t[z];if(s.mapValue){p=m.attr(s.mapValue)}if(v){x=A(D.data.length,p);q=D.data[x];q.key=E=x.toString()}else{x=D._xref[E];if(x>=0){q=D.data[x];if(p&&!D.data[x].value){q.value=p}}else{x=A(E,p);q=D.data[x];q.isPrimary=z===0}}r.areaDataXref.push(x);q.areasXref.push(w)}B=m.attr("href");if(B&&B!=="#"&&!q.href){q.href=B}if(!r.nohref){m.bind("click.mapster",D.click);if(!d.isTouch){m.bind("mouseover.mapster",D.mouseover).bind("mouseout.mapster",D.mouseout).bind("mousedown.mapster",D.mousedown)}}m.data("mapster",w+1)}D.setAreaOptions(s.areas);D.redrawSelections()},processCommandQueue:function(){var n,m=this;while(!m.currentAction&&m.commands.length){n=m.commands[0];m.commands.splice(0,1);d.impl[n.command].apply(n.that,n.args)}},clearEvents:function(){h(this.map).find("area").unbind(".mapster");h(this.images).unbind(".mapster")},_clearCanvases:function(m){if(!m){h(this.base_canvas).remove()}h(this.overlay_canvas).remove()},clearMapData:function(n){var m=this;this._clearCanvases(n);h.each(this.data,function(o,p){p.reset()});this.data=null;if(!n){this.image.style.cssText=this.imgCssText;h(this.wrapper).before(this.image).remove()}m.images.clear();this.image=null;k.ifFunction(this.clearTooltip,this)},removeSelectionFinish:function(){var m=this.graphics;m.refreshSelections();m.clearHighlight()}}}(jQuery));(function(f){var c=f.mapster,d=c.utils;function b(g){var h=this,i=h.owner;if(i.options.singleSelect){i.clearSelections()}if(!h.isSelected()){if(g){h.optsCache=f.extend(h.effectiveRenderOptions("select"),g,{altImageId:i.images.add(g.altImage)})}h.drawSelection();h.selected=true;h.changeState("select",true)}if(i.options.singleSelect){i.graphics.refreshSelections()}}function e(g){var h=this;h.selected=false;h.changeState("select",false);h.optsCache=null;h.owner.graphics.removeSelections(h.areaId);if(!g){h.owner.removeSelectionFinish()}}function a(g){var h=this;if(!h.isSelected()){h.select(g)}else{h.deselect()}return h.isSelected()}c.AreaData=function(g,h,i){f.extend(this,{owner:g,key:h||"",isPrimary:true,areaId:-1,href:"",value:i||"",options:{},selected:null,areasXref:[],area:null,optsCache:null})};c.AreaData.prototype={constuctor:c.AreaData,select:b,deselect:e,toggle:a,areas:function(){var h,g=[];for(h=0;h<this.areasXref.length;h++){g.push(this.owner.mapAreas[this.areasXref[h]])}return g},coords:function(h){var g=[];f.each(this.areas(),function(j,k){g=g.concat(k.coords(h))});return g},reset:function(){f.each(this.areas(),function(g,h){h.reset()});this.areasXref=[];this.options=null},isSelectedOrStatic:function(){var g=this.effectiveOptions();return d.isBool(g.staticState)?g.staticState:this.isSelected()},isSelected:function(){return d.isBool(this.selected)?this.selected:d.isBool(this.owner.area_options.selected)?this.owner.area_options.selected:false},isSelectable:function(){return d.isBool(this.effectiveOptions().staticState)?false:(d.isBool(this.owner.options.staticState)?false:d.boolOrDefault(this.effectiveOptions().isSelectable,true))},isDeselectable:function(){return d.isBool(this.effectiveOptions().staticState)?false:(d.isBool(this.owner.options.staticState)?false:d.boolOrDefault(this.effectiveOptions().isDeselectable,true))},isNotRendered:function(){var g=f(this.area);return g.attr("nohref")||!g.attr("href")||this.effectiveOptions().isMask},effectiveOptions:function(g){var h=d.updateProps({},this.owner.area_options,this.options,g||{},{id:this.areaId});h.selected=this.isSelected();return h},effectiveRenderOptions:function(j,g){var h,i=this.optsCache;if(!i||j==="highlight"){h=this.effectiveOptions(g);i=d.updateProps({},h,h["render_"+j]);if(j!=="highlight"){this.optsCache=i}}return f.extend({},i)},changeState:function(g,h){if(f.isFunction(this.owner.options.onStateChange)){this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:g,selected:h})}},highlight:function(g){var h=this.owner;if(this.effectiveOptions().highlight){h.graphics.addShapeGroup(this,"highlight",g)}h.setHighlightId(this.areaId);this.changeState("highlight",true)},drawSelection:function(){this.owner.graphics.addShapeGroup(this,"select")}};c.MapArea=function(g,h,j){if(!g){return}var i=this;i.owner=g;i.area=h;i.areaDataXref=[];i.originalCoords=[];f.each(d.split(h.coords),function(k,l){i.originalCoords.push(parseFloat(l))});i.length=i.originalCoords.length;i.shape=h.shape.toLowerCase();i.nohref=h.nohref||!h.href;i.configure(j)};c.MapArea.prototype={constructor:c.MapArea,configure:function(g){this.keys=d.split(g)},reset:function(){this.area=null},coords:function(g){return f.map(this.originalCoords,function(h){return g?h:h+g})}}}(jQuery));(function(b){var a=b.mapster.utils;a.areaCorners=function(p,r,o,s,q){var i,n,D,B,C,A,y,w,v,t,l,k,E,u,e=0,d=0,h,f,m,g,z,c,x=[];p=p.length?p:[p];o=o?b(o):b(document.body);i=o.offset();h=i.left;f=i.top;if(r){i=b(r).offset();e=i.left;d=i.top}for(u=0;u<p.length;u++){c=p[u];if(c.nodeName==="AREA"){m=a.split(c.coords,parseInt);switch(c.shape){case"circle":l=m[0];k=m[1];g=m[2];x=[];for(u=0;u<360;u+=20){z=u*Math.PI/180;x.push(l+g*Math.cos(z),k+g*Math.sin(z))}break;case"rect":x.push(m[0],m[1],m[2],m[1],m[2],m[3],m[0],m[3]);break;default:x=x.concat(m);break}for(u=0;u<x.length;u+=2){x[u]=parseInt(x[u],10)+e;x[u+1]=parseInt(x[u+1],10)+d}}else{c=b(c);i=c.position();x.push(i.left,i.top,i.left+c.width(),i.top,i.left+c.width(),i.top+c.height(),i.left,i.top+c.height())}}D=B=y=v=999999;C=A=w=t=-1;for(u=x.length-2;u>=0;u-=2){l=x[u];k=x[u+1];if(l<D){D=l;t=k}if(l>C){C=l;v=k}if(k<B){B=k;w=l}if(k>A){A=k;y=l}}if(s&&q){n=false;b.each([[w-s,B-q],[y,B-q],[D-s,t-q],[D-s,v],[C,t-q],[C,v],[w-s,A],[y,A]],function(j,F){if(!n&&(F[0]>h&&F[1]>f)){E=F;n=true;return false}});if(!n){E=[C,A]}}return E}}(jQuery));(function(c){var a=c.mapster,b=a.utils,d=a.MapArea.prototype;a.utils.getScaleInfo=function(e,g){var f;if(!g){f=1;g=e}else{f=e.width/g.width||e.height/g.height;if(f>0.98&&f<1.02){f=1}}return{scale:(f!==1),scalePct:f,realWidth:g.width,realHeight:g.height,width:e.width,height:e.height,ratio:e.width/e.height}};a.utils.scaleMap=function(h,f,i){var g=b.size(h),e=b.size(f,true);if(!e.complete()){throw ("Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.")}if(!g.complete()){g=e}return this.getScaleInfo(g,i?e:null)};a.MapData.prototype.resize=function(g,t,j,s){var f,r,i,k,e,n,o=this;s=s||j;function q(u,p,v){if(a.hasCanvas()){u.width=p;u.height=v}else{c(u).width(p);c(u).height(v)}}function l(){o.currentAction="";if(c.isFunction(s)){s()}o.processCommandQueue()}function m(){q(o.overlay_canvas,g,t);if(e>=0){var p=o.data[e];p.tempOptions={fade:false};o.getDataForKey(p.key).highlight();p.tempOptions=null}q(o.base_canvas,g,t);o.redrawSelections();l()}function h(){c(o.image).css(i);o.scaleInfo=b.getScaleInfo({width:g,height:t},{width:o.scaleInfo.realWidth,height:o.scaleInfo.realHeight});c.each(o.data,function(p,u){c.each(u.areas(),function(v,w){w.resize()})})}if(o.scaleInfo.width===g&&o.scaleInfo.height===t){return}e=o.highlightId;if(!g){n=t/o.scaleInfo.realHeight;g=Math.round(o.scaleInfo.realWidth*n)}if(!t){n=g/o.scaleInfo.realWidth;t=Math.round(o.scaleInfo.realHeight*n)}i={width:String(g)+"px",height:String(t)+"px"};if(!a.hasCanvas()){c(o.base_canvas).children().remove()}k=c(o.wrapper).find(".mapster_el").add(o.wrapper);if(j){r=[];o.currentAction="resizing";k.each(function(p,u){f=b.defer();r.push(f);c(u).animate(i,{duration:j,complete:f.resolve,easing:"linear"})});f=b.defer();r.push(f);b.when.all(r).then(m);h();f.resolve()}else{k.css(i);h();m()}};a.MapArea=b.subclass(a.MapArea,function(){this.base.init();if(this.owner.scaleInfo.scale){this.resize()}});d.coords=function(f,i){var e,h=[],g=f||this.owner.scaleInfo.scalePct,k=i||0;if(g===1&&i===0){return this.originalCoords}for(e=0;e<this.length;e++){h.push(Math.round(this.originalCoords[e]*g)+k)}return h};d.resize=function(){this.area.coords=this.coords().join(",")};d.reset=function(){this.area.coords=this.coords(1).join(",")};a.impl.resize=function(g,f,h,i){if(!g&&!f){return false}var e=(new a.Method(this,function(){this.resize(g,f,h,i)},null,{name:"resize",args:arguments})).go();return e}}(jQuery));(function(g){var a=g.mapster,d=a.utils;g.extend(a.defaults,{toolTipContainer:'<div style="border: 2px solid black; background: #FFFFFF; width:160px; padding:4px; margin: 4px; -moz-box-shadow: 3px 3px 5px #535353; -webkit-box-shadow: 3px 3px 5px #535353; box-shadow: 3px 3px 5px #535353; -moz-border-radius: 6px 6px 6px 6px; -webkit-border-radius: 6px; border-radius: 6px 6px 6px 6px; opacity: 1.0;"></dteniv>',showToolTip:false,toolTipFade:true,toolTipClose:["area-mouseout","image-mouseout"],onShowToolTip:null,onHideToolTip:null});g.extend(a.area_defaults,{toolTip:null,toolTipClose:null});function e(j,k,i){var l;if(k){l=typeof k==="string"?g(k):g(k).clone();l.append(j)}else{l=g(j)}l.css(g.extend((i||{}),{display:"block",position:"absolute"})).hide();g("body").append(l);l.attr("data-opacity",l.css("opacity")).css("opacity",0);return l.show()}function h(m,k){var i={left:k.left+"px",top:k.top+"px"},j=m.attr("data-opacity")||0,l=m.css("z-index");if(parseInt(l,10)===0||l==="auto"){i["z-index"]=9999}m.css(i).addClass("mapster_tooltip");if(k.fadeDuration&&k.fadeDuration>0){d.fader(m[0],0,j,k.fadeDuration)}else{d.setOpacity(m[0],j)}}a.MapData.prototype.clearToolTip=function(){if(this.activeToolTip){this.activeToolTip.stop().remove();this.activeToolTip=null;this.activeToolTipID=null;d.ifFunction(this.options.onHideToolTip,this)}};function b(k,i,l,o,m,j){var n=l+".mapster-tooltip";if(g.inArray(i,k)>=0){o.unbind(n).bind(n,function(p){if(!m||m.call(this,p)){o.unbind(".mapster-tooltip");if(j){j.call(this)}}});return{object:o,event:n}}}function f(m,o,n,i,k){var j,l={};k=k||{};if(o){j=d.areaCorners(o,n,i,m.outerWidth(true),m.outerHeight(true));l.left=j[0];l.top=j[1]}else{l.left=k.left;l.top=k.top}l.left+=(k.offsetx||0);l.top+=(k.offsety||0);l.css=k.css;l.fadeDuration=k.fadeDuration;h(m,l);return m}a.AreaData.prototype.showToolTip=function(m,s){var r,j,l,n,p,k={},q=this,o=q.owner,i=q.effectiveOptions();s=s?g.extend({},s):{};m=m||i.toolTip;j=s.closeEvents||i.toolTipClose||o.options.toolTipClose||"tooltip-click";p=typeof s.template!=="undefined"?s.template:o.options.toolTipContainer;s.closeEvents=typeof j==="string"?j=d.split(j):j;s.fadeDuration=s.fadeDuration||(o.options.toolTipFade?(o.options.fadeDuration||i.fadeDuration):0);l=q.area?q.area:g.map(q.areas(),function(t){return t.area});if(o.activeToolTipID===q.areaId){return}o.clearToolTip();o.activeToolTip=r=e(m,p,s.css);o.activeToolTipID=q.areaId;n=function(){o.clearToolTip()};b(j,"area-click","click",g(o.map),null,n);b(j,"tooltip-click","click",r,null,n);b(j,"image-mouseout","mouseout",g(o.image),function(t){return(t.relatedTarget&&t.relatedTarget.nodeName!=="AREA"&&t.relatedTarget!==q.area)},n);f(r,l,o.image,s.container,p,s);d.ifFunction(o.options.onShowToolTip,q.area,{toolTip:r,options:k,areaOptions:i,key:q.key,selected:q.isSelected()});return r};function c(i){return(i?((typeof i==="string"||i.jquery)?i:i.content):null)}a.impl.tooltip=function(k,j){return(new a.Method(this,function l(){var n,o,m=this;if(!k){m.clearToolTip()}else{o=g(k);if(m.activeToolTipID===o[0]){return}m.clearToolTip();m.activeToolTip=n=e(c(j),j.template||m.options.toolTipContainer,j.css);m.activeToolTipID=o[0];b(["tooltip-click"],"tooltip-click","click",n,null,function(){m.clearToolTip()});m.activeToolTip=n=f(n,o,m.image,j.container,j)}},function i(){if(g.isPlainObject(k)&&!j){j=k}this.showToolTip(c(j),j)},{name:"tooltip",args:arguments,key:k})).go()}}(jQuery));