<html>
<head>
    <script src="https://cdn.jsdelivr.net/clipboard.js/1.5.3/clipboard.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>


    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap.min.js"></script>
    <script src = "js/jquery-1.11.3.min.js"></script>
    <script src = "js/clipboard.min.js"></script>
    <style>
        body{
            margin:0;
            width:100%;
            height:100%;
            background-color: #D4E4F7;
        }

        .mcontent
        {
            display:block;
            width:100%;
            margin: 0 auto;
        }

        .videoHolder
        {
            display:block;
            margin: 0 auto;
            margin-top:125px;
            width:90%;

        }
        .video1
        {
            width:100%;
        }
        .textHolder
        {
            display:block;
            margin: 0 auto;
            margin-top:10px;
            width:90%;
            border: solid black;
            height:30%;
            padding:5px;
            font-size:1.5em;
            background:#F4F4F4;

        }

        .buttonHolder
        {
            display:block;
            margin: 0 auto;
            width:90%;
            margin-top:10px;


        }

        .btn-ntb
        {
        }

        .backgroundContainer
        {
            position:absolute;
            z-index:-1;
            left:0;
            top:0;
            width:100%;
            height:100%;
        }

        .backgroundImage{
            width:100%;
            height:100%;
        }

        .contentWrapper
        {
            margin:0 auto;
            width:60%;
        }

    </style>

</head>


<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class = "container" id = "banner">
    </div>
    <div class="container">
        <div class="navbar-header">
            <img src = "img/SAP-logo2.png" style = "width:100px;height:50px;float:left;">
            <a class="navbar-brand" href="#">Video Listener</a>
        </div>

        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav"></ul>
        </div>
    </div>
</nav>

<div class = "contentWrapper">
    <div class = "mcontent">
        <div id = "hiddenTextArea"></div>
        <div class = "videoHolder">
            <h2>Fiori Developers Guide - Tutorial 2</h2>
            <video controls class = "video1" id = "video1" src = "https://github.wdf.sap.corp/pages/UA-Prototypes-Group/VideoListener/vids/xray-vid.mp4"></video>
        </div>
        <div class = "buttonHolder">
            <button id = "toggler" class = "btn-ntb">Hide Text</button>
            <button id = "copy"  style = "position:relative;left:78.5%" class = "btn-ntb" data-clipboard-target = "#codeHolder">Copy Text</button>
        </div>

        <div  class = "textHolder" id = "codeHolder">
        </div>
    </div>
</div>




<script>
    new Clipboard("#copy");
    var textQuote = function(text,time)
    {
        this.text = text;
        this.time = time;
        if(text.length>1000)
        {
            this.text = "The text that was entered here has too many characters. The length of the textQuote cannot exceed 250 characters";
        }
    };
    var textQuotes = [];
    var counter =0;
    textQuotes[0] = new textQuote("Hi, welcome to the second entry in the Fiori Developers Guide. " +
            "Keep an eye on this box, as it will display relevant code snippets as the video progresses. ","00:01");
    textQuotes[1] = new textQuote('<Column id = "supplierColumn">' +
            '<Text text = "{18n>tableSupplierColumnTitle}" id = "supplierColumnTitle"/>' +
            '</Column>',"01:00");
    textQuotes[2] = new textQuote("tableSupplierTitleName = Supplier","01:50");
    textQuotes[3] = new textQuote('<Text text = "{SupplierName}" />'  ,"02:40");
    var times = [];
    var x =0;
    var currentTime;
    var selectedIndex = 0;
    for(y =0;y<textQuotes.length;y++)
    {
        times[y] = convertToSeconds(textQuotes[y].time);
    }
    var video = document.getElementById("video1");
    video.ontimeupdate = function()
    {
        for(i = 0;i<textQuotes.length;i++)
        {
            if(parseInt(video.currentTime)>times[i])
            {
                selectedIndex = i;
                x = selectedIndex;
            }
        }
        videoListener(textQuotes[selectedIndex]);
        currentTime = video.currentTime;
    };
    function videoListener(textQuote)
    {
        $("#codeHolder").text(textQuote.text);
        // $("#copy").attr("data-clipboard-text",$("#codeHolder").html());
    }
    function convertToSeconds(time)
    {
        var time1 = time;
        var chars = time1.split('');
        var timeInSeconds = (parseInt(chars[0]*600) + parseInt(chars[1]*60) +parseInt(chars[3]*10)+ parseInt(chars[4]));
        return timeInSeconds;
    }
    $("#toggler").click(
            function() {
                $(".textHolder").slideToggle();
                if ($("#toggler").html() === "Hide Text") {
                    $("#toggler").html("Show Text");
                }
                else {
                    $("#toggler").html("Hide Text");
                }
            }
    );
    function bloop()
    {
        return textQuotes[1].text;
    }
</script>


</body>



</html>